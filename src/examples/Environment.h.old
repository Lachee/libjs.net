#if 0
#pragma once

#include <LibJS/Runtime/Object.h>
#include <LibJS/Runtime/GlobalObject.h>

class GlobalThis final : public JS::GlobalObject {
    JS_OBJECT(GlobalThis, JS::GlobalObject);

public:
  GlobalThis(JS::Realm &realm) : JS::GlobalObject(realm) {}
  virtual void initialize(JS::Realm &) override;
  virtual ~GlobalThis() override = default;

private:
    JS_DECLARE_NATIVE_FUNCTION(invoke);

};

class Environment
{
public:
    void * m_invoke_function;

private:
    NeverDestroyed<RefPtr<JS::VM>> m_vm_storage;

public:
    Environment() {}
    ~Environment(){}

    bool initialize_vm();
    JS::ThrowCompletionOr<JS::Value> execute(StringView source, StringView source_name);
};

struct WebEngineCustomData final : public JS::VM::CustomData {

    virtual ~WebEngineCustomData() override = default;
    

    virtual void spin_event_loop_until(GC::Root<GC::Function<bool()>> goal_condition) override;

    Environment *container;

    // GC::Root<HTML::EventLoop> event_loop;

    // GC::Root<JS::Realm> internal_realm;
    // OwnPtr<JS::ExecutionContext> root_execution_context;
};

extern "C" {
    Environment* create_environment();
    void set_invoke(Environment *env, void *function_ptr);
    void run(Environment *env, const char *source);
    // void set_function(VMContainer *vm, const char *name, void *function_ptr);
}
#endif